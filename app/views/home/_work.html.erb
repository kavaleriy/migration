
<%= text_field_tag 'home_search_rubric', params[:home_search_rubric], { 'placeholder' => t('home.search.work_placeholder'), :class => 'form-control col-lg-10' } %>


<script type="text/javascript">
    $(document).ready(function() {
        $("#home_search_rubric").select2({
            allowClear:true,
            ajax: {
                url: "/api/get_professions",
                dataType: 'json',
                data: function (term, page) {
                    return {
                        q: term, // search term
                        page_limit: 10,
                    };
                },
                results: function (data, page) { // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to alter remote JSON data
                    return {results: data, text: "name" };
                }
            },
            formatSelection: function(item) {
                return item.name
            },
            formatResult: function(item) {
                return item.name
            }
        });
    });
</script>
